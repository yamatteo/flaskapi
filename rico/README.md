# Rico Game API
_This README was generated by [Claude](https://claude.ai/), handwritten parts are in italics._
_Most of it is wrong or outdated. I'll write a new README soon enough._

This is the backend API for the Rico board game. It implements the full game logic and allows playing games over a network.

## Overview

The API is implemented in Python using the Flask framework. The main components are:

- `game.py` - Implements the core game logic like game state, player actions, role cards etc.

- `flask_app.py` - Sets up the Flask app and API endpoints. Uses Pusher for realtime updates.

- `actions.py` - Defines the player Action models like RoleAction, TileAction etc.

- `cards.py` - Implements the RoleCard, Tile and Building models.

- `counters.py` - Helper for managing resources like goods, people etc. 

- `players.py` - The Player model tracking player state.

- `pseudos.py` - Logic for generating ~~randomized~~ player pseudonyms _(that is two characters, unique for each player, the closest possible to the initials of the real name)_.

## Usage

The API exposes the following endpoints:

- `POST /login` - Login with username and password _(ephemeral, every game reset memory)_
- `POST /start` - Start a new game
- `POST /action` - Make a move by sending an Action 

Actions represent things like taking a role, placing a tile, moving workers etc. The game state is automatically updated after each action.

The updated state is broadcast via [Pusher](https://pusher.com/) to all connected clients. The `/info` endpoint can also be polled to get the latest state.

A sample client is implemented in `test_app.py` using the requests library.

## Running Locally

- Clone the repo
- Run `pip install -r requirements.txt`
- Start the server with `python flask_app.py`
- The API will be live at `http://localhost:5000`

## Deployment
_Claude doesn't know, but we have deployed the api thanks to [pythonanywhere](https://www.pythonanywhere.com/) and there is a [frontend](https://rico-svelte.vercel.app/) thanks to [Vercel](https://vercel.com/)._

~~The API can be deployed to any host that can run Python/Flask apps. Some options:~~
- ~~Heroku~~
- ~~AWS Elastic Beanstalk~~
- ~~Google App Engine~~
- ~~DigitalOcean App Platform~~

~~The `PURESHER_APP_ID`, `PUSHER_KEY` etc will need to be configured with valid credentials.~~ _(there is an interesting typo there: PUSHER > PURESHER)_

## License

This project is licensed under the MIT License - see the [LICENSE](LICENSE) file for details.